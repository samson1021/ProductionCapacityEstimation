@using mechanical.Models.Dto.IndBldgFacilityEquipmentDto;
@model mechanical.Models.Dto.CollateralDto.ReturnCollateralDto;
@{
    var Ibvaluation = ViewData["Ibvaluation"] as IndBldgFacilityEquipmentReturnDto;
    var CurrentUserId = ViewData["CurrentUserId"] as Guid? ?? Guid.Empty;
    var currentStage = Model.CurrentStage;
}
<script>
    function formatNumber(number) {
        return number.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    function formatAndDisplayValue(elementId) {
        var element = document.getElementById(elementId);
        var value = parseFloat(element.textContent);
        var formattedValue = formatNumber(value);
        element.textContent = formattedValue;
    }
</script>
<section class="content">
    <section class="col-xl-12 connectedSortable">
        <div class="card">
            <div class="card-body">
                @{
                    if (Ibvaluation != null)
                    {

                        <div class="row mb-2">
                            <div class="col-sm-12 col-xl-12">
                                <h4 class="m-0 text-center"> Collateral valuation result</h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="container col-12">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <h4 class="text-center">General Information</h4>
                                    </div>
                                </div>
                                <div class="row" style="margin-top:1.25rem;">
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>MachineryType:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.IndustrialBuildingMachineryType </div>
                                        </div>
                                    </div>

                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Year Of Manufacture:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.YearOfManufacture</div>
                                        </div>
                                    </div>
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Country Of Origin:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.CountryOfOrigin</div>
                                        </div>
                                    </div>

                                </div>
                                <div class="row" style="margin-top:1.25rem;">
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Model No:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.ModelNo</div>
                                        </div>
                                    </div>
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Engine No:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.EngineNo</div>
                                        </div>
                                    </div>
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Serial No:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.SerialNo</div>
                                        </div>
                                    </div>

                                </div>
                                <div class="row" style="margin-top:1.25rem;">
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Engine Type:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.EngineType </div>
                                        </div>
                                    </div>
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Power Supply :</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.PowerSupply</div>
                                        </div>
                                    </div>
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Motor Power:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.MotorPower</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="margin-top:1.25rem;">
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Maker Company:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.MakerCompany</div>
                                        </div>
                                    </div>
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Technology Standard:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.TechnologyStandard</div>
                                        </div>
                                    </div>
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Maker Preference Type:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.MakerPreferenceType</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="margin-top:1.25rem;">
                                    <div class="row col-lg-6">
                                        <div class="col-lg-6">
                                            <label>Working Production Capacity:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.WorkingProductionCapacity</div>
                                        </div>
                                    </div>
                                    <div class="row col-lg-6">
                                        <div class="col-lg-6">
                                            <label>Other Tech Specification:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.OtherTechSpec</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr />
                        <div class="row">
                            <div class="container col-12">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <h4 class="text-center">Assessment Information</h4>
                                    </div>
                                </div>
                                <div class="row" style="margin-top:1.25rem;">
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Current Equipment Condition:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.CurrentEqpmntCondition</div>
                                        </div>
                                    </div>

                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Allocated Points Range:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.AllocatedPointsRange </div>
                                        </div>
                                    </div>
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Market Share Factor:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.MarketShareFactor</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="margin-top:1.25rem;">
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Depreciation Rate:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.DepreciationRate</div>
                                        </div>
                                    </div>
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Equipment Condition Factor:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div>@Ibvaluation.EqpmntConditionFactor</div>
                                        </div>
                                    </div>
                                    <div class="row col-lg-4">
                                        <div class="col-lg-6">
                                            <label>Replacement Cost:</label>
                                        </div>
                                        <div class="col-lg-6">
                                            <div id="ReplacementCost">@Ibvaluation.ReplacementCost</div>
                                        </div>
                                    </div>
                                    <div class="row" style="margin-top:1.25rem;">
                                        <div class="row col-lg-4">
                                            <div class="col-lg-6">
                                                <label class="text-purple">Net Estimation Value:</label>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="text-purple" id="NetEstimationValue">@Ibvaluation.NetEstimationValue</div>
                                            </div>
                                        </div>
                                        <div class="row col-lg-4">
                                            <div class="col-lg-6">
                                                <label>Physical and Installation Assessment:</label>
                                            </div>
                                            <div class="col-lg-6">
                                                <div>@Ibvaluation.PhysicalAndInstallationAssesment </div>
                                            </div>
                                        </div>
                                        <div class="row col-lg-4">
                                            <div class="col-lg-6">
                                                <label>Overall Survey Assessment:</label>
                                            </div>
                                            <div class="col-lg-6">
                                                <div>@Ibvaluation.OverallSurveyAssesment</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" style="margin-top:1.25rem;">
                                        <div class="row col-lg-3">
                                            <div class="col-lg-6">
                                                <label>Remark:</label>
                                            </div>
                                            <div class="col-lg-6">
                                                <div>@Ibvaluation.Remark </div>
                                            </div>
                                        </div>
                                        <div class="row col-lg-3">
                                            <div class="col-lg-6">
                                                <label>Invoice Value:</label>
                                            </div>
                                            <div class="col-lg-6">
                                                <div id="InvoiceValue">@Ibvaluation.InvoiceValue </div>
                                            </div>
                                        </div>
                                        <div class="row col-lg-3">
                                            <div class="col-lg-6">
                                                <label>Currency:</label>
                                            </div>
                                            <div class="col-lg-6">
                                                <div></div>@Ibvaluation.Currency
                                            </div>
                                        </div>
                                        <div class="row col-lg-3">
                                            <div class="col-lg-6">
                                                <label>Exchange Rate:</label>
                                            </div>
                                            <div class="col-lg-6">
                                                <div></div>@Ibvaluation.ExchangeRate
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="row col-12">
                            @{
                                if (Ibvaluation.EvaluatorUserID == CurrentUserId && currentStage == "Maker Officer")
                                {
                                    @using (Html.BeginForm("SendCheking", "MOCase", FormMethod.Post))
                                    {
                                        <div class="row col-12">
                                            <div style="margin-top:1.25rem;" class="col-2">
                                                <input name="CollateralId" value=@Ibvaluation.CollateralId type="hidden" id="CollateralId" />

                                                <div class="row">
                                                    <button type="submit" class="col-xl-11  btn btn-sm  bg-purple">send for checker  <i class="fas fa-paper-plane"></i></button>

                                                </div>
                                            </div>
                                            <div style="margin-top:1.25rem;" class="col-2">
                                                <div class="row">
                                                    <a href="@Url.Action("EditIndBldgFacilityEquipment", "IndBldgFacilityEquipment")?id=@Ibvaluation.CollateralId" class="col-xl-12  btn btn-sm  bg-purple">Edit  <i class="fas fa-pen"></i></a>

                                                </div>
                                            </div>
                                        </div>
                                    }
                                }
                            }
                        </div>
                    }
                    else
                    {
                        <div>
                            <h6 class="text-center">not evaluated yet </h6>
                        </div>
                    }

                }
               
            </div>
        </div>

    </section>
</section>
<script>
    formatAndDisplayValue('ReplacementCost');
    formatAndDisplayValue('InvoiceValue');
    formatAndDisplayValue('NetEstimationValue');
</script>