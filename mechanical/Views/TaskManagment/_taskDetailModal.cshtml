<!-- Task Details Modal -->
<div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="taskDetailModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content bg-white rounded-4 shadow">
            <div class="card card-purple card-outline-2">
                <div class="card-header rounded-top-4">
                    <ul class="nav nav-tabs nav-justified w-100 d-flex justify-content-between align-items-center" id="taskTabs" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active fw-semibold" id="details-tab" data-bs-toggle="pill" href="#details" role="tab" aria-controls="details" aria-selected="true">
                                <i class="fas fa-info-circle me-2"></i>Task Details
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link fw-semibold" id="comments-tab" data-bs-toggle="pill" href="#comments" role="tab" aria-controls="comments" aria-selected="false">
                                <i class="fas fa-comments me-2"></i>Comments
                                <span class="badge badge-warning ms-2 CommentBage"></span>
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- Modal Body -->
                <div class="card-body" style="height: 450px;">
                    <div class="tab-content" id="taskTabsContent">
                        <!-- Task Details Tab -->
                        <div class="modal-body p-0 tab-pane fade show active" id="details" role="tabpanel" aria-labelledby="details-tab">
                            <div class="modal-body">
                                <p class="text-muted">Loading task details...</p>
                            </div>
                        </div>
                        
                        <!-- Comments Tab -->
                        <div class="tab-pane fade" id="comments" role="tabpanel" aria-labelledby="comments-tab">
                            @await Html.PartialAsync("_sharedTasksComment")
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Footer -->
            <div class="modal-footer bg-light rounded-bottom-4">
                <button type="button" class="btn btn-purple btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times"></i>Close
                </button>
            </div>
        </div>
    </div>
</div>

<style>
    .modal-content {
        border: none;
    }
    .nav-tabs .nav-link {
        border: none;
        color: #7d6c6d;
        transition: all 0.3s ease;
    }
    .nav-tabs .nav-link.active {
        color: #6f42c1;
        border-bottom: 2px solid #6f42c1;
    }
    .nav-tabs .nav-link:hover {
        color: #6f42c1;
    }
    .badge {
        font-size: 0.875em;
        padding: 0.5em 0.75em;
    }
    .btn-purple {
        background-color: #6f42c1;
        color: white;
        border: none;
    }
    .btn-purple:hover {
        background-color: #5a32a3;
    }
    .btn-outline-purple {
        border-color: #6f42c1;
        color: #6f42c1;
    }
    .btn-outline-purple:hover {
        background-color: #6f42c1;
        color: white;
    }
</style>